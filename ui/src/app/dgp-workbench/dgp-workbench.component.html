<app-container>
    <h1 class='theme-primary-fg'>Data Import Workbench</h1>

    <div class='buttons'>
        <div class='button' (click)='finalize()'>
            <i class="fas fa-save" aria-hidden="true"></i>
            Save
        </div>
        <h4 class='workbench-subsubtitle' *ngIf='complete === null'>
            Please select a data source
        </h4>
        <h4 class='workbench-subsubtitle' *ngIf='complete === "progress"'>
            Data is processing...
        </h4>
        <h4 class='workbench-subsubtitle' *ngIf='complete === true'>
            Mapping completed successfully, click save to proceed
        </h4>
        <h4 class='workbench-subsubtitle' *ngIf='complete === false'>
            Mapping completed with errors, you can save and continue editing later
        </h4>
    </div>

    <app-step-extract-source [source]='config.source'
                             [loader]='config.loader'
                             *ngIf='stage >= STAGE_SPECIFY_SOURCE'
                             (update)='updateUrl($event)'>
    </app-step-extract-source>
    <app-step-extract-structure [structure]='config.structure'
                                *ngIf='stage >= STAGE_SOURCE_PARAMETERS'
                                (change)='store.setConfig(config)'>
    </app-step-extract-structure>
    <app-step-taxonomy [taxonomy]='config.taxonomy'
                        *ngIf='stage >= STAGE_SELECT_TAXONOMY'
                        (change)='store.setConfig(config)'>
    </app-step-taxonomy>
    <app-step-mapping *ngIf='stage >= STAGE_MAPPING'>
    </app-step-mapping>
    <app-step-enrich *ngIf='stage >= STAGE_METADATA'>
    </app-step-enrich>

    <div class='buttons' *ngIf='complete !== null'>
        <div class='button' (click)='finalize()'>
            <i class="fas fa-save" aria-hidden="true"></i>
            Save
        </div>
        <h4 class='workbench-subsubtitle' *ngIf='complete === "progress"'>
            Data is processing...
        </h4>
        <h4 class='workbench-subsubtitle' *ngIf='complete === true'>
            Mapping completed successfully, click save to proceed
        </h4>
        <h4 class='workbench-subsubtitle' *ngIf='complete === false'>
            Mapping completed with errors, you can save and continue editing later
        </h4>
    </div>

    <app-results></app-results>
</app-container>